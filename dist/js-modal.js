(()=>{"use strict";var e=function(e,t,o,n){if(void 0===t&&(t="inline-block"),void 0===o&&(o=400),void 0===n&&(n=null),!e)throw new Error("missing el argument");if(e.style.opacity=e.style.opacity||"0",e.style.display=t,e.style.visibility="visible",o)var i=parseFloat(e.style.opacity)||0,l=setInterval((function(){(i+=20/o)>=1&&(clearInterval(l),i=1,"function"==typeof n&&n()),e.style.opacity=String(i)}),20);else e.style.opacity="1"},t=function(e,t,o){if(void 0===t&&(t=400),void 0===o&&(o=null),!e)throw new Error("missing el argument");if(t)var n=1,i=setInterval((function(){(n-=20/t)<=0&&(clearInterval(i),n=0,e.style.display="none",e.style.visibility="hidden","function"==typeof o&&o()),e.style.opacity=String(n)}),20);else e.style.opacity="0",e.style.display="none",e.style.visibility="hidden"};const o=function(){var o={containerClasses:["mask","blocker","current"],closeClass:"close-modal",modalClass:"modal",fadeDuration:260,fadeDelay:.6,showClose:!0,escapeClose:!0,clickClose:!0,allowDrag:!1},n=[];function i(e){"Escape"===e.key&&l()}function l(){if(n.length){var e=n[n.length-1]._options;e.escapeClose&&document.removeEventListener("keydown",i);var o,l,a,s,r=n[n.length-1].container,c=r.querySelector(".".concat(e.modalClass));t(c,e.fadeDuration),t(r,e.fadeDuration),1===n.length&&(a=Math.abs(null===(l=null===(o=document.body)||void 0===o?void 0:o.getBoundingClientRect())||void 0===l?void 0:l.top)||0,(s=document.body.style).overflowX="unset",s.overflowY="unset",s.position="static",s.width="auto",window.scrollTo(0,a)),n.pop(),setTimeout((function(){document.body.appendChild(c),e.showClose&&c.querySelector(".".concat(e.closeClass)).remove(),r.remove();var t=new CustomEvent("modal:after-close");c.dispatchEvent(t)}),e.fadeDuration)}}return{open:function(t,a){void 0===a&&(a={});var s,r,c=(s=a,r=JSON.parse(JSON.stringify(o)),Object.keys(s).forEach((function(e){var t=e;void 0!==s[t]&&(r[t]=s[t])})),r);if(t.classList.add(c.modalClass),c.showClose){var d=function(e){void 0===e&&(e=o);var t=document.createElement("a");return t.href="javascript:;",t.classList.add(e.closeClass||""),t.addEventListener("click",(function(){l()})),t}(c);t.appendChild(d)}var u,v,f,p,y=function(e){void 0===e&&(e=o);var t=document.createElement("div");return(e.containerClasses||[]).forEach((function(e){t.classList.add(e)})),t}(c);document.body.appendChild(y),y.appendChild(t),c.clickClose&&y.addEventListener("click",(function(e){e.target===y&&l()})),c.escapeClose&&document.addEventListener("keydown",i),0===n.length&&(f=(null===(v=null===(u=document.body)||void 0===u?void 0:u.getBoundingClientRect())||void 0===v?void 0:v.top)||0,(p=document.body.style).top="".concat(f,"px"),p.width="100%",p.overflowX="hidden",p.overflowY="scroll",p.position="fixed"),e(y,"",c.fadeDuration),c.fadeDelay?setTimeout((function(){e(t,"inline-block",c.fadeDuration)}),c.fadeDelay*c.fadeDuration):e(t,"inline-block",c.fadeDuration),n.push({container:y,_options:c}),c.allowDrag&&function(){if(n.length){var e=n[n.length-1]._options;if(e&&e.allowDrag){var t=n[n.length-1].container.querySelector(".".concat(e.modalClass));t.style.left="0px",t.style.top="0px",t.parentElement&&(t.parentElement.style.overflow="hidden");var o=0,i=0,l=0,a=0;t.addEventListener("mousedown",(function(e){var n;(n=e.target)&&-1!==["INPUT","TEXTAREA","SELECT"].indexOf(n.nodeName)||(function(e){var n=Number(t.style.left.replace("px","")),l=Number(t.style.top.replace("px",""));o=e.clientX-n,i=e.clientY-l}(e),document.addEventListener("mousemove",r),document.addEventListener("mouseup",s))}))}}function s(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",s)}function r(e){e.preventDefault();var n=function(e){var n=e.clientX-o,l=e.clientY-i,a=(s=t.clientWidth,r=t.clientHeight,c=window.innerWidth,d=window.innerHeight,u=Math.floor((c-s)/2),v=Math.floor((d-r)/2),{left:u+s-30,top:v+r-30});var s,r,c,d,u,v;return n<0?Math.abs(n)>a.left&&(n=-a.left):n>a.left&&(n=a.left),l<0?Math.abs(l)>a.top&&(l=-a.top):l>a.top&&(l=a.top),{left:n,top:l}}(e);l=n.left,a=n.top,t.style.left=l+"px",t.style.top=a+"px"}}()},close:l,setOptions:function(e){Object.keys(e).forEach((function(t){var n=t;void 0!==e[n]&&(o[n]=e[n])}))}}}();window.modal=o})();